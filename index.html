<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TV ONLINE - PREMIUM</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root { --bg: #050505; --card: #121212; --accent: #ff0000; }
        body { background-color: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; padding-bottom: 30px; overflow-x: hidden; }
        
        .navbar { background: #000; border-bottom: 1px solid #222; padding: 15px; text-align: center; }
        .navbar-brand { font-weight: 800; color: var(--accent) !important; letter-spacing: 2px; text-transform: uppercase; font-size: 22px; }

        .search-container { max-width: 800px; margin: 20px auto 10px auto; padding: 0 15px; }
        .form-control { background: #1a1a1a; border: 1px solid #333; color: white; border-radius: 8px; padding: 12px; font-size: 15px; }
        .form-control:focus { background: #222; border-color: var(--accent); color: white; box-shadow: none; }

        .filter-container { 
            max-width: 800px; 
            margin: 0 auto 20px auto; 
            padding: 0 15px; 
            display: flex; 
            justify-content: flex-start; 
            gap: 8px; 
            overflow-x: auto; 
            scrollbar-width: none; 
        }
        .filter-container::-webkit-scrollbar { display: none; }

        .btn-filter { 
            background: #1a1a1a; border: 1px solid #333; color: #888; 
            font-size: 10px; font-weight: 800; padding: 10px 16px; border-radius: 6px; 
            text-transform: uppercase; cursor: pointer; white-space: nowrap; flex-shrink: 0;
        }
        .btn-filter.active { background: var(--accent); color: white; border-color: var(--accent); }

        .channel-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(115px, 1fr)); gap: 12px; padding: 0 15px; max-width: 1200px; margin: 0 auto; }

        .channel-card { 
            background: var(--card); border-radius: 10px; padding: 12px; 
            text-align: center; cursor: pointer; transition: 0.2s;
            border: 1px solid #222; height: 135px; display: flex; 
            flex-direction: column; align-items: center; justify-content: center;
        }
        .channel-card:hover { border-color: var(--accent); transform: translateY(-3px); box-shadow: 0 5px 15px rgba(255,0,0,0.2); }
        
        .img-box { height: 55px; width: 55px; display: flex; align-items: center; justify-content: center; margin-bottom: 10px; overflow: hidden; }
        .channel-card img { max-height: 100%; max-width: 100%; object-fit: contain; }
        
        .fallback-avatar { 
            width: 50px; height: 50px; background: #1a1a1a; color: var(--accent); 
            border: 2px solid #333; border-radius: 50%; display: flex; 
            align-items: center; justify-content: center; font-weight: 800; 
        }

        .channel-card span { font-size: 9px; font-weight: 700; text-transform: uppercase; color: #ccc; display: block; overflow: hidden; }
    </style>
</head>
<body>

    <nav class="navbar">
        <span class="navbar-brand">TV ONLINE</span>
    </nav>

    <div class="search-container">
        <input type="text" id="searchInput" class="form-control" placeholder="沐 Buscar canal...">
    </div>

    <div class="filter-container">
        <div class="btn-filter active" onclick="filterCat('TODOS', this)">TODOS</div>
        <div class="btn-filter" onclick="filterCat('24/7', this)">24/7</div>
        <div class="btn-filter" onclick="filterCat('NACIONALES PY', this)">NACIONALES PY</div>
        <div class="btn-filter" onclick="filterCat('DEPORTES', this)">DEPORTES</div>
        <div class="btn-filter" onclick="filterCat('CINE/SERIES', this)">CINE/SERIES</div>
        <div class="btn-filter" onclick="filterCat('NIﾃ前S', this)">NIﾃ前S</div>
    </div>

    <div id="mainGrid" class="channel-grid"></div>

    <script>
        const manualChannels = [
            // 24/7
            { name: "FUTURAMA 24/7", cat: "24/7", url: "http://xcm.budtv-ultra.com:9000/budtv/budtvline/8Y3ymUpJESps/278850.m3u8", logo: "https://upload.wikimedia.org/wikipedia/commons/8/84/Futurama_1999_logo.svg" },
            
            // NACIONALES PY
            { name: "SNT HD", cat: "NACIONALES PY", url: "http://37.230.57.142:9981/stream/channelid/942731043?profile=pass", logo: "https://tvinsur.com/wp-content/uploads/2023/12/SNT-Paraguay-en-vivo-Online.webp" },
            { name: "TELEFUTURO HD", cat: "NACIONALES PY", url: "http://37.230.57.142:9981/stream/channelid/1205239446?profile=pass", logo: "https://upload.wikimedia.org/wikipedia/commons/e/e0/TelefuturoLogo2022.png" },
            { name: "TRECE PY", cat: "NACIONALES PY", url: "http://37.230.57.142:9981/stream/channelid/594907891?profile=pass", logo: "https://tvinsur.com/wp-content/uploads/2023/12/Canal-Trece-Paraguay-en-vivo-Online.webp" },
            { name: "ABC TV", cat: "NACIONALES PY", url: "https://cdn.jwplayer.com/live/broadcast/aide2636.mpd", logo: "https://upload.wikimedia.org/wikipedia/commons/7/70/ABC_TV_Paraguay_logo.png" },
            { name: "NPY", cat: "NACIONALES PY", url: "https://www.desdepylabs.com/External/tvaccion/npy", logo: "https://upload.wikimedia.org/wikipedia/commons/f/f3/NPY_logo.png" },
            { name: "GEN", cat: "NACIONALES PY", url: "https://gentv.desdepylabs.com/External/tvaccion/gentv", logo: "https://upload.wikimedia.org/wikipedia/commons/1/12/Logo_GEN.png" },
            { name: "AMERICA PY", cat: "NACIONALES PY", url: "http://37.230.57.142:9981/stream/channelid/1000724184?profile=pass", logo: "https://upload.wikimedia.org/wikipedia/commons/3/3a/America_TV_Paraguay_logo.png" },
            { name: "C9N", cat: "NACIONALES PY", url: "https://d2qsan2ut81n2k.cloudfront.net/live/48f53430-9014-4459-a048-6169dac14140/ts:abr.m3u8", logo: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg6lnz2CDRLLnpQuDEIbbdewTqtDKk9hzCf25mF-4aIqWTS1JksMcSA-C5j3LRkA1_GYXYNHgSGpxno4C62tgD57UmYQaWWdswOgu9qIMQjFBWwUjvsfIFgSb74f4JxOtTBqIFqFKvFtC-9/s1042/C9N+en+vivo.jpg" },

            // DEPORTES
            { name: "TIGO SPORTS", cat: "DEPORTES", url: "https://futbolparaguayotv.github.io/futbolparaguayotv/3ventos.html", logo: "https://upload.wikimedia.org/wikipedia/commons/4/4b/Tigo_Sports_logo.svg" },
            { name: "ESPN HD", cat: "DEPORTES", url: "http://45.172.16.186:9981/stream/channelid/1688445886?profile=pass", logo: "https://upload.wikimedia.org/wikipedia/commons/a/a7/ESPN_logo.svg" },
            { name: "ESPN PREMIUM", cat: "DEPORTES", url: "http://45.172.16.186:9981/stream/channelid/635786642?profile=pass", logo: "https://upload.wikimedia.org/wikipedia/commons/b/bb/Espn_premium.png" },
            { name: "TYC SPORTS HD", cat: "DEPORTES", url: "http://45.172.16.186:9981/stream/channelid/2114770387?profile=pass", logo: "https://upload.wikimedia.org/wikipedia/commons/e/ee/TyC_Sports_Logo.png" },
            { name: "FOX SPORTS HD", cat: "DEPORTES", url: "http://45.172.16.186:9981/stream/channelid/2027716405?profile=pass", logo: "https://upload.wikimedia.org/wikipedia/commons/1/18/Fox_Sports_logo.svg" },

            // CINE/SERIES
            { name: "HBO HD", cat: "CINE/SERIES", url: "http://45.172.16.186:9981/stream/channelid/602651998?profile=pass", logo: "https://upload.wikimedia.org/wikipedia/commons/d/de/HBO_logo.svg" },
            { name: "STAR CHANNEL HD", cat: "CINE/SERIES", url: "http://45.172.16.186:9981/stream/channelid/1515112925?profile=pass", logo: "https://upload.wikimedia.org/wikipedia/commons/1/1a/Star_Channel_logo.svg" },
            { name: "WARNER TV HD", cat: "CINE/SERIES", url: "http://45.172.16.186:9981/stream/channelid/724963838?profile=pass", logo: "https://upload.wikimedia.org/wikipedia/commons/1/17/Warner_TV_logo.svg" },
            { name: "TNT HD", cat: "CINE/SERIES", url: "http://45.172.16.186:9981/stream/channelid/1778004310?profile=pass", logo: "https://upload.wikimedia.org/wikipedia/commons/b/b5/TNT_Logo_2016.svg" },
            { name: "UNIVERSAL HD", cat: "CINE/SERIES", url: "http://45.172.16.186:9981/stream/channelid/1539493071?profile=pass", logo: "https://upload.wikimedia.org/wikipedia/commons/c/c5/Universal_TV_Logo.png" },

            // NIﾃ前S
            { name: "CARTOON NETWORK HD", cat: "NIﾃ前S", url: "http://45.172.16.186:9981/stream/channelid/154335388?profile=pass", logo: "https://upload.wikimedia.org/wikipedia/commons/8/80/Cartoon_Network_2010_logo.svg" },
            { name: "DISCOVERY KIDS", cat: "NIﾃ前S", url: "http://45.172.16.186:9981/stream/channelid/1511586218?profile=pass", logo: "https://upload.wikimedia.org/wikipedia/commons/2/23/Discovery_Kids_Logo.png" },
            { name: "DISNEY CHANNEL HD", cat: "NIﾃ前S", url: "http://45.172.16.186:9981/stream/channelid/669366619?profile=pass", logo: "https://upload.wikimedia.org/wikipedia/commons/d/da/Disney_Channel_logo.svg" }
        ];

        let allChannels = [];
        let currentFilter = "TODOS";

        async function init() {
            try {
                const response = await fetch('https://magma.alwaysdata.net/budtv/tvmagmanew/api.php');
                const text = await response.text();
                const lines = text.split('\n');
                let remote = [];
                for (let i = 0; i < lines.length; i++) {
                    if (lines[i].includes('#EXTINF:')) {
                        const name = lines[i].split(',')[1]?.trim() || "Canal";
                        const url = lines[i+1]?.trim();
                        const logoMatch = lines[i].match(/tvg-logo="([^"]+)"/);
                        const logo = logoMatch ? logoMatch[1] : "";
                        if (url && url.startsWith('http')) remote.push({ name, url, logo, cat: "API" });
                    }
                }
                allChannels = [...manualChannels, ...remote];
                allChannels.sort((a, b) => a.name.localeCompare(b.name, undefined, {sensitivity: 'base'}));
                render();
            } catch (e) {
                allChannels = manualChannels.sort((a, b) => a.name.localeCompare(b.name));
                render();
            }
        }

        function filterCat(cat, btn) {
            currentFilter = cat;
            document.querySelectorAll('.btn-filter').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            render(document.getElementById('searchInput').value);
        }

        function handleImgError(img, name) {
            img.onerror = null; 
            const parent = img.parentElement;
            parent.innerHTML = `<div class="fallback-avatar">${name.charAt(0).toUpperCase()}</div>`;
        }

        function render(search = "") {
            const grid = document.getElementById('mainGrid');
            grid.innerHTML = "";
            let filtered = allChannels.filter(ch => {
                const matchesSearch = ch.name.toLowerCase().includes(search.toLowerCase());
                const matchesCat = (currentFilter === "TODOS") || (ch.cat === currentFilter) || (ch.cat === "API" && currentFilter === "TODOS");
                return matchesSearch && matchesCat;
            });
            filtered.forEach(ch => {
                const card = document.createElement('div');
                card.className = "channel-card";
                card.innerHTML = `<div class="img-box"><img src="${ch.logo}" onerror="handleImgError(this, '${ch.name}')"></div><span>${ch.name}</span>`;
                card.onclick = () => window.open(ch.url, '_blank');
                grid.appendChild(card);
            });
        }

        document.getElementById('searchInput').addEventListener('input', (e) => render(e.target.value));
        init();
    </script>
</body>
</html>
